<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo</title>
    <script>

        function deleteTodo(id){
            fetch(`https://054e-103-61-255-54.ngrok-free.app/todos/${id}`, {method:"DELETE"}).then((resp)=>{
                if(resp.status== 200){
                    console.log("delete successfully");
                    getData()
                }
            })
        }



        function getData(){
            fetch("https://054e-103-61-255-54.ngrok-free.app/todos/", {method:"GET"}).then((resp)=>{
                resp.json().then((Todos)=>{
                    const container = document.querySelector("div.data")
                    container.innerHTML = ""

                    for (let i =0; i<Todos.length;i++){
                        let row = document.createElement("div")
                        let title = document.createElement("h3")
                        let discription = document.createElement("p")
                        let del = document.createElement("button")
                        title.textContent = Todos[i].title;
                        discription.textContent = Todos[i].description;
                        del.textContent = "Delete";
                        del.setAttribute("onclick", `deleteTodo(${Todos[i].id})`)
                        row.appendChild(title)
                        row.appendChild(discription)
                        row.appendChild(del)
                        container.appendChild(row)
                    }
                })
            })
        }
        getData()
        function send(){
            body= {
                title: document.querySelector("#title").value,
                description: document.querySelector("#discription").value,
                completed:false
            }
            fetch("https://054e-103-61-255-54.ngrok-free.app/todos/", {
                method:"POST",
                body:JSON.stringify(body),
                headers:{
                    "Content-Type":"application/json"
                }
            }).then((res)=>{
                document.querySelector("#title").value="";
                document.querySelector("#discription").value="";
                getData();
            })
        }
    </script>
</head>
<body>
    <span>title</span> 
    <input id="title" type="text">
    <br>
    <br>
    <span>Discription</span>
    <input id="discription" type="text">
    <br>
    <br>
    <!-- <button onclick="getData()">GET data</button> -->
    <button onclick="send()">Add to Todo</button>
    <br><br>
    <div class="data">

    </div>



</body>
</html>